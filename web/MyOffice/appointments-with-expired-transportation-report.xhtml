<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>Visits With Expired Transportation Report</title>
      <style type="text/css">
         @media screen {
            .page {
               border: dotted black 1px;
               padding: 1em;
               margin: 1em;
            }

            .action {
               display: block !important;
               text-align: left;
               margin-left: 2em;
            }
         }
         @media all {
            .action {
               display: none;
            }
            body {
               font-family:Verdana, Geneva, sans-serif;
               font-size: 0.9em;
            }
            center > div {
               width: 800px;
            }
            div > table {
               margin-top: 0;
            }
            td, th {
               border:solid black 1px;
               vertical-align:baseline;
            }
            .signs td, td td {
               border:none;
            }
            #observation-table td, #observation-table td td, #observation-table th {
               border:solid black 1px;
            }
            #observation-table {
               border-collapse: collapse;
            }
            .signs {
               margin-top: 20px;
            }
            td th {
               text-align:right;
               vertical-align:baseline;
            }
            th {
               font-size: smaller;
               white-space: nowrap;
            }
            h3, h4 {
               font-size: 1.2em;
               margin-top: 0px;
               margin-bottom: 5px;
            }
            p {
               margin-top: 0px;
            }
            table.small td {
               font-size: 1em;
            }
            #observation-table {
               margin-top: 0.5em;
               font-size: 0.8em;
            }
            #observation-table th {
               font-size: 0.8em;
               text-align:center;
            }
            div.page {
               margin-left: 2em;
               width: 66em;
               display: block;
               padding:0.1em;
            }
            tr.data-row td {
               font-size: 0.8em;

            }
         }
      </style>
      <script type="text/javascript" src="/#{access.application}/script/jquery/jquery-1.9.0.min.js"></script>
      <script type="text/javascript" src="/#{access.application}/script/printer.js"></script>
   </head>
   <body>
      <h:form prependId="false">
         <div class="action"><a href="#" id="print-link" onclick="return print('Landscape', 5)">PRINT</a>&nbsp;<a id="jsprint-install" href="https://addons.mozilla.org/en-US/firefox/addon/8966/" target="_blank" style="display: none; color: red;">Install plugin for printing...</a></div>
         <div class="action"><h:messages showDetail="#{true}" showSummary="#{false}" infoClass="info"/></div>
         <div class="page">
            <table width="100%" border="0" cellpadding="10px" cellspacing="10px">
               <tr>
                  <td align="center" valign="top" style="border:none;">
                     <h3 style="text-transform:uppercase">Visits With Expired Transportation Form</h3>
                     from #{statistics.formattedDate('MM/dd/yy',jsf.global('myOffice/statistics', 'var')['startDate'])}
                     to #{statistics.formattedDate('MM/dd/yy',jsf.global('myOffice/statistics', 'var')['endDate'])} for #{biz.myOffice(myOfficeCode).name}
                  </td>
               </tr>
            </table>
            <table width="100%" cellpadding="5px" cellspacing="0px" style="border-collapse: collapse; font-size: 0.9em;">
               <tr>
                  <th align="center" valign="top">Date</th>
                  <th align="center" valign="top">MRN</th>
                  <th align="center" valign="top">Patient</th>
                  <th align="center" valign="top">Home Phone</th>
                  <th align="center" valign="top">Appointment Provider</th>
                  <th align="center" valign="top">Type/Expiration Date</th>
                  <th align="center" valign="top">MAP-2015 Provider/NPI</th>
               </tr>
               <ui:repeat value="#{statistics.appointmentsWithExpiredTransportationReport.appointmentList}" var="transportationAppointment" varStatus="status">
                  <tr class="data-row">
                     <td>
                        <nobr><h:outputText value="#{transportationAppointment.datetime}">
                              <f:convertDateTime pattern="MM/dd/yyyy"/>
                           </h:outputText></nobr>
                     </td>
                     <td>#{transportationAppointment.patientId}</td>
                     <td>#{transportationAppointment.patientName}</td>
                     <td>#{edi.patient(transportationAppointment.patientId).homePhone}</td>
                     <td>#{transportationAppointment.officeProvider.alias}</td>
                     <td style="white-space: nowrap;">
                        #{transportationAppointment.transportationType},
                        <h:outputText style="#{transportationAppointment.patientTransportation.expirationDate &lt; transportationAppointment.datetime ? 'color: red;' : ''}" value="#{transportationAppointment.patientTransportation.expirationDate}">
                           <f:convertDateTime pattern="MM/dd/yyyy"/>
                        </h:outputText>
                     </td>
                     <td>#{transportationAppointment.patientTransportation.provider.lastName} #{transportationAppointment.patientTransportation.provider.firstName}#{transportationAppointment.patientTransportation.provider.npi != null ? ', ' : ''}#{transportationAppointment.patientTransportation.provider.npi}</td>
                  </tr>
               </ui:repeat>
            </table>
         </div>
      </h:form>
   </body>
</html>
