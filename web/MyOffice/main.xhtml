<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
   <body>
      <ui:composition template="../template/base.xhtml">

         <ui:define name="title">
            Medical Care: Office
         </ui:define>

         <ui:define name="navigation">
            <ui:include src="../template/tab-navigation.xhtml">
               <ui:param name="page" value="MyOffice/main"/>
            </ui:include>
         </ui:define>

         <ui:define name="form">
            <script type="text/javascript">
               dojo.require('dojox.fx.scroll');
               dojo.require('dojox.fx');

               function reclaimAttentionOn(id){
                  dojox.fx.smoothScroll({node:dojo.byId(id),win:window,duration:400}).play();
                  dojox.fx.highlight({node:dojo.byId(id),duration:1600}).play();
               }
            </script>
            <ui:fragment rendered="#{jsf.global('myOffice', 'scroll')['patientHomecareClaim'] != null}">
               <script type="text/javascript">
                  dojo.addOnLoad(function(){
                     reclaimAttentionOn('#{jsf.global('myOffice', 'scroll')['patientHomecareClaim']}');
                  });
                  #{jsf._do(jsf.global('myOffice', 'scroll').put('patientHomecareClaim', null)).stay()}
               </script>
            </ui:fragment>                    
            <div class="float-left column" jsfc="h:panelGroup">
               <ui:include src="template/search.xhtml"/>
            </div>
            <div jsfc="h:panelGroup" rendered="#{jsf.global('myOffice')['subview'] == 'AuthorizableAppointment'}">
               <div class="float-left column" jsfc="h:panelGroup" rendered="#{not empty var.MyOffice.Appointment.list._}">
                  #{jsf._do(var.MyOffice.Appointment.tableConfig.patient._ == null ? var.MyOffice.Appointment.tableConfig.patient._(true) : null).
                    _do(var.MyOffice.Appointment.tableConfig.insurance._ == null ? var.MyOffice.Appointment.tableConfig.insurance._(true) : null).
                    _do(var.MyOffice.Appointment.tableConfig.authorizationNumber._ == null ? var.MyOffice.Appointment.tableConfig.authorizationNumber._(true) : null).
                    _do(var.MyOffice.Appointment.tableConfig.provider._ == null ? var.MyOffice.Appointment.tableConfig.provider._(true) : null).
                    stay()}
                  <h3 class="table-label" style="display:inline-block;">
                     Authorizable Appointments
                     <h:graphicImage styleClass="context-menu-button" value="/theme/#{cookie.theme.value}/image/layout.png" style="position: relative; top:2px;" title="Show/Hide columns"/>
                     <span style="display: none;">
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Appointment.tableConfig.id._}"/>
                        <label>ID</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Appointment.tableConfig.time._}"/>
                        <label>Time</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Appointment.tableConfig.patient._}"/>
                        <label>Patient</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Appointment.tableConfig.insurance._}"/>
                        <label>Insurance</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Appointment.tableConfig.authorizationNumber._}"/>
                        <label>Authorization Number</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Appointment.tableConfig.action._}"/>
                        <label>Action</label>
                        <div class="separator"/>
                        <h:commandLink action="#{jsf.stay}" value="Apply">
                           <f:ajax execute="@form" render="@form" onevent="ajaxEventHandler"/>
                        </h:commandLink>
                     </span>                           
                  </h3>
                  <h:commandButton value="Refresh" action="#{jsf._do(var.MyOffice.Appointment.search._(null)).stay}" title="Refresh Authorizable Appointment List" style="margin: 0; margin-right: 0.5em; margin-left: 1em; font-size: 0.7em; width: auto;"/>
                  <br style="margin-bottom: 0.75em;"/>
                  <ui:include src="../Appointment/template/table.xhtml">
                     <ui:param name="appointmentList" value="#{var.MyOffice.Appointment.list._}"/>
                     <ui:param name="tableConfig" value="#{var.MyOffice.Appointment.tableConfig}"/>
                  </ui:include>
               </div>
            </div>
            <div jsfc="h:panelGroup" rendered="#{jsf.global('myOffice')['subview'] == 'AuthorizableVisit'}">
               <div class="float-left column" jsfc="h:panelGroup" rendered="#{not empty var.MyOffice.Visit.list._}">
                  #{jsf._do(var.MyOffice.Visit.tableConfig.patient._ == null ? var.MyOffice.Visit.tableConfig.patient._(true) : null).
                    _do(var.MyOffice.Visit.tableConfig.insurance._ == null ? var.MyOffice.Visit.tableConfig.insurance._(true) : null).
                    _do(var.MyOffice.Visit.tableConfig.authorizationNumber._ == null ? var.MyOffice.Visit.tableConfig.authorizationNumber._(true) : null).
                    _do(var.MyOffice.Visit.tableConfig.provider._ == null ? var.MyOffice.Visit.tableConfig.provider._(true) : null).
                    stay()}
                  <h3 class="table-label" style="display:inline-block;">
                     Authorizable Visits
                     <h:graphicImage styleClass="context-menu-button" value="/theme/#{cookie.theme.value}/image/layout.png" style="position: relative; top:2px;" title="Show/Hide columns"/>
                     <span style="display: none;">
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Visit.tableConfig.id._}"/>
                        <label>ID</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Visit.tableConfig.insurance._}"/>
                        <label>Insurance</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Visit.tableConfig.patient._}"/>
                        <label>Patient</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Visit.tableConfig.authorizationNumber._}"/>
                        <label>Authorization Number</label>
                        <h:selectBooleanCheckbox value="#{var.MyOffice.Visit.tableConfig.action._}"/>
                        <label>Action</label>
                        <div class="separator"/>
                        <h:commandLink action="#{jsf.stay}" value="Apply">
                           <f:ajax execute="@form" render="@form" onevent="ajaxEventHandler"/>
                        </h:commandLink>
                     </span>
                  </h3>
                  <h:commandButton value="Refresh" action="#{jsf._do(var.MyOffice.Visit.search._(null)).stay}" title="Refresh Authorizable Visit List" style="margin: 0; margin-right: 0.5em; margin-left: 1em; font-size: 0.7em; width: auto;"/>
                  <br style="margin-bottom: 0.75em;"/>
                  <ui:include src="../Visit/template/table.xhtml">
                     <ui:param name="visitList" value="#{var.MyOffice.Visit.list._}"/>
                     <ui:param name="tableConfig" value="#{var.MyOffice.Visit.tableConfig}"/>
                  </ui:include>
               </div>
            </div>                     
            #{jsf._do(jsf.global('myOffice', 'event').clear()).stay()}
         </ui:define>

      </ui:composition>

   </body>
</html>